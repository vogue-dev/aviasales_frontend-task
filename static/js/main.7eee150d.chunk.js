(this["webpackJsonptest-task"]=this["webpackJsonptest-task"]||[]).push([[0],{33:function(e,t,a){e.exports=a.p+"static/media/logo.0c089234.svg"},36:function(e,t,a){e.exports=a(68)},64:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(12),i=a.n(c),s=a(5),o=a(8),l=a.n(o),u=a(11),d=a(14),m=a.n(d),f=function(e){return{type:"SET_TICKETS_DATA",payload:e}},p=function(e){return{type:"SET_LOADED",payload:e}},v=a(35),E=a(15);function h(e,t){return e.price>t.price?1:-1}function b(e,t){var a=0,n=0;return e.segments.forEach((function(e){a+=e.duration})),t.segments.forEach((function(e){n+=e.duration})),a>n?1:-1}var g=function(e){var t=e.data,a=e.isLoaded;return r.a.createElement(r.a.Fragment,null,a?t.map((function(e,t){return r.a.createElement("div",{className:"ticket",key:t},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"price col-6"},(a=e.price,"".concat(a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," \u0420"))),r.a.createElement("div",{className:"logo-s7 col-6"},r.a.createElement("img",{src:"https://pics.avs.io/99/36/".concat(e.carrier,".png"),alt:"logo-s7"}))),e.segments.map((function(e,t){return r.a.createElement("div",{className:"row",key:t},r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header-left"},e.origin," \u2013 ",e.destination),r.a.createElement("div",{className:"body-left"},function(e,t){var a=Object(v.a)(new Date(e),{seconds:t});return"".concat(Object(E.a)(new Date(e),"HH:mm")," - ").concat(Object(E.a)(new Date(a),"HH:mm"))}(e.date,e.duration))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header-center"},"\u0412 \u041f\u0423\u0422\u0418"),r.a.createElement("div",{className:"body-center"},function(e){var t=e/3600^0,a=(e-3600*t)/60^0;return"".concat(0===t?"":t<10?"0"+t+"\u0447":t+"\u0447"," ").concat(0===a?"":a<10?"0"+a+" \u043c":a+" \u043c")}(e.duration))),r.a.createElement("div",{className:"col-4"},r.a.createElement("div",{className:"header-right"},function(e){switch(e){case 0:return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";case 1:return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";case 2:return"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";case 3:return"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";default:return"".concat(e," \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")}}(e.stops.length)),r.a.createElement("div",{className:"body-right"},e.stops.join(", "))))})));var a})):r.a.createElement("div",null,"Loading..."))},k=function(e){var t=e.state,a=t.dataTickets,n=t.isLoaded,c=t.isError,i=t.filters,s=t.tabs,o=function(e,t){var a=e.map((function(e){return e.value}));return a.length>0?t.filter((function(e){var t=e.segments.map((function(e){return e.stops})).sort((function(e,t){return e.length<t.length?1:-1}))[0].length;return!!a.includes(t)})):t}(i.filter((function(e){return e.isChecked})),a||[]),l=s.findIndex((function(e){return!0===e.isActive}));console.log("activeIndex",l);var u,d,m=(u=s[l].id,d=o,1===u?d.sort(h):2===u?d.sort(b):d);return c?r.a.createElement("div",{className:"ticket-error"}," Technical Error, please reload page"):r.a.createElement(g,{data:m,isLoaded:n})},O=a(28),x=a(29),N=function(e){return{type:"SET_FILTERS",payload:e}};function y(){var e=Object(O.a)(["\n\t {\n\t\twidth: 100%;\n\t\theight: 53px;\n\t\tleft: 123px;\n\t\ttop: 180px;\n\t\tpadding: 0 20px 0 20px !important;\n\t\tmargin-bottom: -11px;\n\n\t\tfont-family: Open Sans;\n\t\tfont-style: normal;\n\t\tfont-weight: 600;\n\t\tfont-size: 12px;\n\t\tline-height: 12px;\n\t\t/* identical to box height, or 100% */\n\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\n\t\tletter-spacing: 0.5px;\n\t\ttext-transform: uppercase;\n\n\t\tcolor: #4a4a4a;\n\t}\n"]);return y=function(){return e},e}var j=x.a.div(y()),T=function(e){var t=e.filters,a=Object(s.b)(),n=function(e){a(function(e,t){return function(a){var n,r=t;if(1===e.id){var c=!e.isChecked;n=r.map((function(e){return e.isChecked=c,e}))}else n=r.map((function(t){return 1===t.id&&(t.isChecked=!1),e.id===t.id&&(t.isChecked=!t.isChecked),t}));a(N(n))}}(e,t))};return r.a.createElement("div",{className:"filter col-3"},r.a.createElement(j,null,"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r.a.createElement("div",{className:"count row"},r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("label",{htmlFor:"checkbox",onClick:function(){return n(e)},key:t},r.a.createElement("li",null,r.a.createElement("input",{className:"check",type:"checkbox",id:t,checked:e.isChecked}),r.a.createElement("span",{className:"checkmark"}),r.a.createElement("div",null,e.text)))})))))},w=function(e){return{type:"SET_SORTING_TABS",payload:e}},S=(a(64),function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.state.tabs})),a=function(a){e(function(e,t){return function(){var a=Object(u.a)(l.a.mark((function a(n){var r;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=t.map((function(t){return e.id===t.id?(t.isActive=!0,t):(t.isActive=!1,t)})),n(w(r));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a,t))};return r.a.createElement("div",{className:"tabs-wrapper"},t.map((function(e){return r.a.createElement("div",{className:e.isActive?"tab active":"tab",onClick:function(){return a(e)},key:e.id},r.a.createElement("div",{className:"inner"},e.text))})))}),_=a(33),C=a.n(_),A=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.state})),a=t.filters,c=t.tabs;return Object(n.useEffect)((function(){e(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(p(!1)),function(){var e=Object(u.a)(l.a.mark((function e(){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m()("https://front-test.beta.aviasales.ru/search").then((function(e){return m.a.get("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e.data.searchId)).catch((function(e){return console.log(e.response)}))}));case 2:return a=e.sent,e.next=5,a.data.tickets.slice(0,5);case 5:n=e.sent,t(f(n));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),r.a.createElement("div",{className:"app__wrapper"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:C.a,className:"logo-img",alt:"logo"})),r.a.createElement(T,{filters:a}),r.a.createElement("div",{className:"main col-9"},r.a.createElement(S,{tabs:c}),r.a.createElement(k,{state:t})))},I=a(7),L=a(34),D=a(6),R={dataTickets:[],isLoaded:!1,isError:!1,filters:[{id:1,text:"\u0412\u0441\u0435",isChecked:!0,value:-1},{id:2,text:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",isChecked:!0,value:0},{id:3,text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",isChecked:!0,value:1},{id:4,text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0,value:2},{id:5,text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0,value:3}],tabs:[{id:1,text:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439",isActive:!0},{id:2,text:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439",isActive:!1}]},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TICKETS_DATA":return Object(D.a)(Object(D.a)({},e),{},{dataTickets:t.payload,isLoaded:!0});case"SET_LOADED":return Object(D.a)(Object(D.a)({},e),{},{isLoaded:t.payload});case"SET_SORTING_TABS":return Object(D.a)(Object(D.a)({},e),{},{tabs:t.payload});case"SET_FILTERS":return Object(D.a)(Object(D.a)({},e),{},{filters:t.payload});default:return e}},F=Object(I.c)({state:B}),H=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||I.d,G=Object(I.e)(F,H(Object(I.a)(L.a)));a(65),a(66),a(67);i.a.render(r.a.createElement(s.a,{store:G},r.a.createElement(A,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.7eee150d.chunk.js.map